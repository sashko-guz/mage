{
  "storages": [
    {
      "name": "uploads",
      "driver": "local",
      "root": "/var/www/uploads",
      "signature_secret_key": "your-secret-key-for-uploads",
      "cache": {
        "memory": {
          "enabled": true,
          "max_size_mb": 512,
          "max_items": 1000
        },
        "disk": {
          "enabled": true,
          "ttl_seconds": 300,
          "max_size_mb": 5120,
          "dir": "/var/cache/mage/uploads",
          "clear_on_startup": false
        }
      },
      "_comment": "Cache stores BOTH source images and thumbnails. max_size_mb is the TOTAL limit for sources + thumbnails combined."
    },
    {
      "name": "s3-default",
      "driver": "s3",
      "bucket": "my-bucket",
      "region": "us-west-1",
      "access_key": "YOUR_ACCESS_KEY",
      "secret_key": "YOUR_SECRET_KEY",
      "s3_http_config": {
        "max_idle_conns": 100,
        "max_idle_conns_per_host": 100,
        "max_conns_per_host": 0,
        "idle_conn_timeout_sec": 90,
        "connect_timeout_sec": 10,
        "request_timeout_sec": 30,
        "response_header_timeout_sec": 10
      },
      "cache": {
        "memory": {
          "enabled": false
        },
        "disk": {
          "enabled": false
        }
      }
    },
    {
      "name": "s3-compatible",
      "driver": "s3",
      "bucket": "my-bucket",
      "region": "us-east-1",
      "access_key": "YOUR_ACCESS_KEY",
      "secret_key": "YOUR_SECRET_KEY",
      "base_url": "https://rustfs.example.com",
      "signature_secret_key": "your-secret-key-for-s3",
      "s3_http_config": {
        "max_idle_conns": 150,
        "max_idle_conns_per_host": 150,
        "connect_timeout_sec": 5,
        "request_timeout_sec": 60
      },
      "cache": {
        "memory": {
          "enabled": true,
          "max_size_mb": 1024
        },
        "disk": {
          "enabled": true,
          "ttl_seconds": 100,
          "max_size_mb": 10240,
          "dir": "/var/cache/mage/s3-compatible",
          "clear_on_startup": false
        }
      }
    }
  ]
}
